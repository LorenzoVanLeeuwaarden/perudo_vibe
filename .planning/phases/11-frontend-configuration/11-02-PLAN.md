---
phase: 11-frontend-configuration
plan: 02
type: execute
wave: 2
depends_on: [11-01]
files_modified: []
autonomous: false

user_setup:
  - service: cloudflare
    why: "Cloudflare Pages hosting for static frontend"
    env_vars: []
    dashboard_config: []

must_haves:
  truths:
    - "Frontend is accessible at faroleo.pages.dev"
    - "Static assets (CSS, JS) load correctly"
    - "SPA routing works (direct navigation to /room/ABC works)"
    - "WebSocket connection can be established to production backend"
  artifacts:
    - path: "https://faroleo.pages.dev"
      provides: "Live production frontend"
      external: true
  key_links:
    - from: "faroleo.pages.dev"
      to: "perudo-vibe.lorenzovanleeuwaarden.partykit.dev"
      via: "WebSocket connection from client JS"
      pattern: "wss://perudo-vibe.lorenzovanleeuwaarden.partykit.dev"
---

<objective>
Deploy the static Next.js build to Cloudflare Pages.

Purpose: Make the frontend publicly accessible so users can access the Perudo game via URL.

Output: Live frontend at faroleo.pages.dev connected to production PartyKit backend.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-frontend-configuration/11-CONTEXT.md
@.planning/phases/11-frontend-configuration/11-RESEARCH.md
@.planning/phases/11-frontend-configuration/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Authenticate with Cloudflare and create Pages project</name>
  <files></files>
  <action>
Authenticate with Cloudflare using wrangler CLI:

```bash
npx wrangler login
```

This opens a browser for Cloudflare OAuth. User must complete authentication.

After authentication succeeds, create the Cloudflare Pages project:

```bash
npx wrangler pages project create faroleo
```

This creates a new Pages project named "faroleo" which will be accessible at faroleo.pages.dev.

If wrangler login fails or times out, this is a blocking issue - user needs to authenticate manually via browser.

If project creation fails with "project already exists", that's fine - proceed to deployment.
  </action>
  <verify>
- `npx wrangler whoami` shows authenticated user
- Project "faroleo" exists (or creation succeeded)
  </verify>
  <done>Cloudflare authenticated and Pages project created</done>
</task>

<task type="auto">
  <name>Task 2: Deploy to Cloudflare Pages</name>
  <files></files>
  <action>
Deploy the static build to Cloudflare Pages:

```bash
npx wrangler pages deploy out/ --project-name=faroleo
```

This uploads all files from `out/` directory to Cloudflare Pages.

Expected output will include:
- Upload progress
- Deployment URL (preview URL like abc123.faroleo.pages.dev)
- Production URL: https://faroleo.pages.dev

If deployment fails:
- Check that `out/` directory exists (run `npm run build` if missing)
- Check wrangler authentication (run `npx wrangler whoami`)

Save the deployment URLs for verification.
  </action>
  <verify>
- Wrangler deploy command completes successfully
- Output shows production URL (faroleo.pages.dev)
  </verify>
  <done>Static site deployed to Cloudflare Pages</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Complete frontend deployment to Cloudflare Pages with production backend connection</what-built>
  <how-to-verify>
1. Open https://faroleo.pages.dev in browser
2. Verify home page loads (shows mode selection)
3. Check browser DevTools Network tab - no 404 errors for JS/CSS
4. Open browser DevTools Console - no errors about missing resources
5. Try navigating to https://faroleo.pages.dev/room/TEST directly (should show room page, not 404)
6. On home page, click "Multiplayer" -> Create room
7. Verify room is created (should show lobby with room code)
8. Check browser console for "Connected" message or verify no WebSocket errors

Expected: All assets load, SPA routing works, WebSocket connection to production backend succeeds.
  </how-to-verify>
  <resume-signal>Type "approved" if frontend works, or describe any issues found</resume-signal>
</task>

</tasks>

<verification>
After all tasks complete:
1. https://faroleo.pages.dev loads successfully
2. All static assets (CSS, JS, images) load without 404s
3. SPA routing works - direct navigation to /room/ABC doesn't 404
4. WebSocket connection establishes to production PartyKit backend
5. Room creation flow works end-to-end
</verification>

<success_criteria>
- Cloudflare Pages project "faroleo" created
- Static build deployed successfully
- Frontend accessible at https://faroleo.pages.dev
- No console errors for missing assets
- WebSocket connection to production backend works
- User verification confirms deployment
</success_criteria>

<output>
After completion, create `.planning/phases/11-frontend-configuration/11-02-SUMMARY.md`
</output>
