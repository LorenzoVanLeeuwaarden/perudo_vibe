---
phase: 20-core-gauntlet-loop-transitions
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - src/components/gauntlet/FightCard.tsx
  - src/components/gauntlet/VictorySplash.tsx
  - src/components/gauntlet/GameOverScreen.tsx
  - src/components/gauntlet/StreakCounter.tsx
  - src/components/gauntlet/index.ts
autonomous: true

must_haves:
  truths:
    - "Player sees fight card introducing next opponent"
    - "Player sees victory splash after defeating an opponent"
    - "Player sees game over screen when eliminated"
    - "Player sees streak counter during gameplay"
  artifacts:
    - path: "src/components/gauntlet/FightCard.tsx"
      provides: "Opponent introduction card"
      exports: ["FightCard"]
    - path: "src/components/gauntlet/VictorySplash.tsx"
      provides: "Post-duel victory screen"
      exports: ["VictorySplash"]
    - path: "src/components/gauntlet/GameOverScreen.tsx"
      provides: "Final game over with retry"
      exports: ["GameOverScreen"]
    - path: "src/components/gauntlet/StreakCounter.tsx"
      provides: "Persistent streak counter overlay"
      exports: ["StreakCounter"]
  key_links:
    - from: "src/components/gauntlet/FightCard.tsx"
      to: "opponent data"
      via: "props"
      pattern: "opponentName.*personalityId"
    - from: "src/components/gauntlet/GameOverScreen.tsx"
      to: "restart callback"
      via: "button onClick"
      pattern: "onRestart"
---

<objective>
Create Gauntlet UI components: fight card, victory splash, game over screen, and streak counter.

Purpose: Provide the cinematic transition screens that appear between duels - fight card introduces opponents, victory splash celebrates wins (ominous tone), game over handles defeat with instant retry.

Output: Four gauntlet-specific React components with Framer Motion animations.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/REQUIREMENTS.md

Phase context:
@.planning/phases/20-core-gauntlet-loop-transitions/20-CONTEXT.md
@.planning/phases/20-core-gauntlet-loop-transitions/20-RESEARCH.md

Existing patterns:
@src/components/VictoryScreen.tsx
@src/components/DefeatScreen.tsx
@src/lib/ai/personalities.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create FightCard component</name>
  <files>src/components/gauntlet/FightCard.tsx</files>
  <action>
Create FightCard component following RPG encounter style from CONTEXT.md.

Props interface:
- `opponentName: string` - AI name (e.g., "El Bloffo")
- `personalityId: string` - Personality type (turtle, calculator, shark)
- `roundNumber: number` - Current round number
- `playerColor: PlayerColor` - For accent theming
- `onDismiss: () => void` - Called when player clicks to continue

Design per CONTEXT.md decisions:
- RPG encounter style - "ROUND X" header, opponent name, personality description
- Full profile: opponent name, personality description from PERSONALITIES, difficulty indicator, flavor quote
- Card stays until player clicks/taps to dismiss (player controls pacing)
- Same card design for all personalities - content differs but visual treatment consistent

Implementation:
1. Full-screen dark overlay with centered card
2. Card design:
   - Header: "ROUND {roundNumber}" in bold
   - Large opponent name with glow effect
   - Personality name and description (get from PERSONALITIES[personalityId])
   - Difficulty indicator based on personality: Turtle = "Easy", Calculator = "Medium", Shark = "Hard"
   - Flavor quote based on personality (create 1-2 quotes per personality)
   - "Click to begin" hint at bottom

3. Animation:
   - Card slides in from side (use motion.div with x animation)
   - Content staggers in (name, then description, then quote)
   - Pulsing glow effect on card border

4. Use existing hooks: useIsFirefox, useReducedMotion for simplified animations

Flavor quotes (examples):
- Turtle: "Patience is a virtue... and a strategy."
- Calculator: "The odds are always in my favor."
- Shark: "I smell blood in the water."

Import PERSONALITIES from '@/lib/ai/personalities' to get personality name and description.
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>FightCard component displays opponent intro with round number, name, personality, and dismiss interaction</done>
</task>

<task type="auto">
  <name>Task 2: Create VictorySplash and GameOverScreen components</name>
  <files>src/components/gauntlet/VictorySplash.tsx, src/components/gauntlet/GameOverScreen.tsx</files>
  <action>
Create two transition screen components following DefeatScreen/VictoryScreen patterns but with gauntlet-specific tone.

**VictorySplash.tsx** (TRAN-01):
Props:
- `defeatedOpponentName: string` - Who was just beaten
- `streak: number` - Current streak count
- `playerColor: PlayerColor`
- `onContinue: () => void` - Move to next fight card

Design per CONTEXT.md (ominous progression tone):
- Full-screen overlay with dark background (not triumphant gold)
- Show defeated opponent name: "{name} Defeated"
- Show updated streak prominently
- Ominous message: "One down, many to go..." or "The gauntlet continues..."
- "Continue" button or click anywhere to dismiss
- Use subtle, muted colors - not celebratory fireworks
- Tone: survival, not triumph

Animations:
- Fade in with scale
- Streak number bumps/pulses
- Muted particle effects (optional, skip if Firefox)

**GameOverScreen.tsx** (GAUN-07, GAUN-08):
Props:
- `finalStreak: number` - Opponents defeated before elimination
- `playerColor: PlayerColor`
- `onRestart: () => void` - "Enter the Gauntlet Again"
- `onExit: () => void` - Return to main menu

Design per CONTEXT.md (dramatic elimination):
- Dark, cinematic styling similar to DefeatScreen
- Large text: "THE GAUNTLET CLAIMS ANOTHER..."
- Final stats: "{streak} opponents defeated"
- Prominent "Enter the Gauntlet Again" button (instant retry)
- Smaller "Return to Menu" option
- Dramatic red/dark color scheme
- Screen shake on entry (can reuse DefeatScreen pattern)

Both components should:
- Use useIsFirefox and useReducedMotion for simplified animations
- Follow full-screen overlay pattern from existing screens
- Be click-dismissible after short delay (prevent accidental skips)
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>VictorySplash shows ominous "one down" message with streak; GameOverScreen shows final stats with instant retry</done>
</task>

<task type="auto">
  <name>Task 3: Create StreakCounter component and update index</name>
  <files>src/components/gauntlet/StreakCounter.tsx, src/components/gauntlet/index.ts</files>
  <action>
Create StreakCounter component for persistent overlay during gameplay.

**StreakCounter.tsx** (GAUN-06):
Props:
- `streak: number` - Current count
- `className?: string` - For positioning from parent

Design per CONTEXT.md:
- Top corner position (handled by parent via className)
- Themed display matching gauntlet aesthetic (not minimalist)
- Dark background with red/orange accent
- Label format: "{X} Defeated"
- Icon: could use Skull from lucide-react or similar

Animation per CONTEXT.md:
- Satisfying bump animation when streak increases
- Use key={streak} to force remount on change
- Scale pulse: [1, 1.3, 1] over 0.4s
- Optional: spring animation for number change

Implementation:
1. Container with dark semi-transparent background
2. Number displayed prominently with glow
3. "Defeated" label below/beside number
4. motion.div with initial/animate for bump effect
5. Use useReducedMotion to skip bump if needed

**Update index.ts**:
Export all gauntlet components:
- RulesScreen (from Plan 01)
- FightCard
- VictorySplash
- GameOverScreen
- StreakCounter
  </action>
  <verify>TypeScript compiles: `npx tsc --noEmit`</verify>
  <done>StreakCounter displays "{X} Defeated" with bump animation; all gauntlet components exported from index</done>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` - No TypeScript errors
2. All components can be imported: `import { FightCard, VictorySplash, GameOverScreen, StreakCounter } from '@/components/gauntlet'`
3. Components follow existing animation patterns (useIsFirefox, useReducedMotion)
4. TRAN-01 through TRAN-04 requirements addressed by components
</verification>

<success_criteria>
- TRAN-01: VictorySplash shows defeated opponent
- TRAN-02: FightCard shows round number ("ROUND X")
- TRAN-03: FightCard shows opponent name and personality flair
- TRAN-04: FightCard has animated entry (slide-in)
- GAUN-06: StreakCounter displays during gameplay
- GAUN-07/08: GameOverScreen shows final stats with instant retry
- All components use Framer Motion with Firefox/reduced-motion fallbacks
</success_criteria>

<output>
After completion, create `.planning/phases/20-core-gauntlet-loop-transitions/20-02-SUMMARY.md`
</output>
