---
phase: 19-end-game-tooling
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - eslint.config.mjs
  - package.json
autonomous: true

must_haves:
  truths:
    - "npm run lint executes without 'Invalid project directory' error"
    - "ESLint analyzes TypeScript and JSX files correctly"
    - "Lint errors/warnings are reported (not silently ignored)"
  artifacts:
    - path: "eslint.config.mjs"
      provides: "ESLint flat config for Next.js 16"
      contains: "eslint-config-next"
    - path: "package.json"
      provides: "Updated lint script"
      contains: "eslint ."
  key_links:
    - from: "package.json"
      to: "eslint.config.mjs"
      via: "npm run lint invokes eslint which reads config"
      pattern: "\"lint\".*eslint"
---

<objective>
Migrate ESLint configuration from deprecated `next lint` to direct ESLint invocation with flat config format.

Purpose: Next.js 16 removed the `next lint` command. The project needs ESLint to work for code quality checks.
Output: Working `npm run lint` command using eslint.config.mjs flat config format.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/19-end-game-tooling/19-RESEARCH.md

Reference for ESLint config pattern (from research):
```javascript
// eslint.config.mjs
import { defineConfig, globalIgnores } from 'eslint/config'
import nextVitals from 'eslint-config-next/core-web-vitals'
import nextTs from 'eslint-config-next/typescript'

const eslintConfig = defineConfig([
  ...nextVitals,
  ...nextTs,
  globalIgnores([
    '.next/**',
    'out/**',
    'build/**',
    'next-env.d.ts',
  ]),
])

export default eslintConfig
```
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create ESLint flat config and update package.json</name>
  <files>eslint.config.mjs, package.json</files>
  <action>
    1. Create `eslint.config.mjs` at project root with Next.js 16 flat config:
       - Import defineConfig and globalIgnores from 'eslint/config'
       - Import nextVitals from 'eslint-config-next/core-web-vitals'
       - Import nextTs from 'eslint-config-next/typescript'
       - Spread nextVitals and nextTs into the config array
       - Add globalIgnores for .next/**, out/**, build/**, next-env.d.ts

    2. Update `package.json` "lint" script:
       - Change from `"lint": "next lint"` to `"lint": "eslint ."`

    NOTE: eslint and eslint-config-next are already installed (check package.json devDependencies).
    Do NOT add new dependencies.
  </action>
  <verify>
    Run `npm run lint` and confirm:
    - No "Invalid project directory" error
    - ESLint runs and analyzes files
    - Either passes cleanly or shows actual lint warnings/errors (not config errors)
  </verify>
  <done>
    `npm run lint` executes successfully, analyzing src/ files with Next.js ESLint rules.
  </done>
</task>

</tasks>

<verification>
Run these commands to verify the plan is complete:

```bash
# Verify eslint.config.mjs exists with correct content
cat eslint.config.mjs | grep -q "eslint-config-next" && echo "Config imports present"

# Verify package.json lint script updated
cat package.json | grep -q '"lint": "eslint ."' && echo "Lint script updated"

# Run lint and check for successful execution
npm run lint 2>&1 | head -20
```

Expected outcome: `npm run lint` completes (exit 0 or exit with lint errors, but NOT configuration errors).
</verification>

<success_criteria>
- [ ] eslint.config.mjs exists at project root with flat config format
- [ ] package.json "lint" script is `"eslint ."`
- [ ] `npm run lint` runs without "Invalid project directory" or config errors
- [ ] ESLint analyzes TypeScript/JSX files (may report lint warnings - that's expected)
</success_criteria>

<output>
After completion, create `.planning/phases/19-end-game-tooling/19-01-SUMMARY.md` following the summary template.
</output>
