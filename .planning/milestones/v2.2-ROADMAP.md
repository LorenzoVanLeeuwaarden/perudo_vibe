# Milestone v2.2: UI Unification & Tech Debt

**Status:** ✅ SHIPPED 2026-01-20
**Phases:** 16-19
**Total Plans:** 7

## Overview

Consolidate single-player and multiplayer UI into one unified component set, clean up tech debt (shared hooks, lint fix).

## Phases

### Phase 16: Shared Hooks

**Goal**: Animation components use centralized hooks for Firefox detection and reduced motion
**Depends on**: Phase 15
**Requirements**: HOOKS-01, HOOKS-02, HOOKS-03, HOOKS-04, HOOKS-05
**Plans**: 1 plan

Plans:
- [x] 16-01-PLAN.md — Migrate DudoOverlay, ShaderBackground to shared hooks; DiceRoller3D deleted (unused)

**Details:**
- Created single source of truth for Firefox detection (useIsFirefox)
- Created useReducedMotion hook for accessibility
- Established useSimplifiedAnimations pattern combining both guards
- Removed duplicate detection logic from components

### Phase 17: Game UI Unification

**Goal**: Multiplayer uses single-player game UI styling consistently
**Depends on**: Phase 16
**Requirements**: GAME-01, GAME-02, GAME-03, GAME-04
**Plans**: 2 plans

Plans:
- [x] 17-01-PLAN.md — Unify GameBoard bidding phase styling (bid display + player dice shelf)
- [x] 17-02-PLAN.md — Unify RevealPhase styling (bid vs actual comparison)

**Details:**
- Multiplayer GameBoard now uses recessed table surface bid display matching single-player
- Player dice section uses shelf layout with radial glow
- BidUI uses hideBidDisplay={true} for consistent rendering
- RevealPhase uses Bid vs Actual comparison blocks with incremental counting
- Player hands use 2-column grid on mobile, flexible row on desktop

### Phase 18: Lobby Unification

**Goal**: Both lobby types share styling foundation with mode-specific features
**Depends on**: Phase 16
**Requirements**: LOBBY-01, LOBBY-02, LOBBY-03
**Plans**: 2 plans

Plans:
- [x] 18-01-PLAN.md — Create LobbyLayout foundation and integrate single-player lobby
- [x] 18-02-PLAN.md — Integrate multiplayer lobby with LobbyLayout

**Details:**
- Created LobbyLayout component with header/content/footer zones
- Static gradient background (GPU efficient)
- Single-player lobby refactored to use LobbyLayout
- Multiplayer lobby refactored to use LobbyLayout with leave confirmation
- Created LeaveConfirmDialog component for multiplayer

### Phase 19: End Game & Tooling

**Goal**: Single-player has stats, multiplayer has celebration, lint works
**Depends on**: Phase 17
**Requirements**: END-01, END-02, END-03, END-04, TOOL-01
**Plans**: 2 plans

Plans:
- [x] 19-01-PLAN.md — ESLint configuration migration (flat config for Next.js 16)
- [x] 19-02-PLAN.md — Single-player stats tracking and end game flow

**Details:**
- Migrated ESLint to flat config format with FlatCompat wrapper
- Fixed all 31 lint issues (25 errors, 6 warnings) to achieve zero errors
- Added single-player stats tracking during gameplay
- Implemented celebration → stats → lobby flow matching multiplayer
- Reused GameResultsScreen component for both modes

---

## Milestone Summary

**Key Decisions:**
- Keep Dice3D prop name as isFirefox for backward compatibility, pass combined value
- LobbyLayout uses static gradient background (same colors as ShaderBackground simplified mode)
- FlatCompat wrapper for eslint-config-next compatibility with ESLint 9 flat config
- Reuse GameResultsScreen for single-player stats display

**Issues Resolved:**
- `npm run lint` / `next lint` failing with directory error
- Duplicate Firefox detection in multiple components
- Inconsistent styling between single-player and multiplayer UI
- Missing stats tracking in single-player mode

**Issues Deferred:**
- None

**Technical Debt Incurred:**
- Sound files remain placeholders

---

*For current project status, see .planning/ROADMAP.md*
